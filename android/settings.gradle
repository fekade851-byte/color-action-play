// Plugin management must be the first block in settings.gradle
pluginManagement {
    repositories {
        gradlePluginPortal()
        google()
        mavenCentral()
    }
    
    resolutionStrategy {
        eachPlugin {
            if (requested.id.namespace == 'com.android' || requested.id.name == 'kotlin-android-extensions') {
                useModule("com.android.tools.build:gradle:8.1.0")
            }
        }
    }
}

// Dependency resolution management
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    
    // Configure repositories for all projects
    repositories {
        google()
        mavenCentral()
        maven { url 'https://jitpack.io' }
    }
}

// Root project name
rootProject.name = "ColorMoveKids"

// Include all modules
include ':app'

// Include Capacitor plugins if they exist
def capacitorPluginsDir = new File('./capacitor-cordova-android-plugins/')
if (capacitorPluginsDir.exists()) {
    include ':capacitor-cordova-android-plugins'
    project(':capacitor-cordova-android-plugins').projectDir = capacitorPluginsDir
}

// Apply Capacitor settings if the file exists
def capacitorSettings = file('capacitor.settings.gradle')
if (capacitorSettings.exists()) {
    apply from: capacitorSettings
}